<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h2>投稿一覧</h2>
      <% if user_signed_in? %>
        <%= link_to "新規投稿", new_post_path, class: "btn btn-primary" %>
      <% end %>

      <%= form_tag(search_path,:method => 'get') do %>
        <%= text_field_tag :search %>
        <%= submit_tag 'Search', :name => nil %>
      <% end %>

      <table class="table">
        <thead>
          <tr>
            <th>作成日</th>
            <th>タイトル</th>
            <th>タグ</th>
            <th>作成者</th>
          </tr>
        </thead>
        <tbody>
          <% @posts.each do |post| %>
            <tr>
              <td><%= post.created_at.strftime("%Y-%m-%d %H:%M") %></td>
              <td><%= link_to post.title, post_path(post.id) %></td>
              <td>
                <% post.tag_list.each do |tag| %>
                  <%= link_to tag, posts_path(tag_name: tag), class: "btn btn-info" %>
                <% end %>
              </td>
              <td><%= link_to post.user.name, user_path(post.user_id) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= paginate @posts %>
    </div>
  </div>
</div>